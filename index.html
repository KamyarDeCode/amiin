<!DOCTYPE html><html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù…ÛŒÙ† Ø§ÙˆØ±Ø¹ÛŒ | Ø§Ø³ØªØ±ÛŒÙ…Ø± </title>
    
    <!-- ÙÙˆÙ†Øª ÙˆØ²ÛŒØ± Ù…ØªÙ† -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    
    <!-- Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Toastify for alerts -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Vazirmatn', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            purple: '#8b5cf6',
                            cyan: '#06b6d4',
                            dark: '#0f172a',
                            pink: '#ec4899'
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        .neon-text {
            text-shadow: 0 0 10px rgba(139, 92, 246, 0.5), 0 0 20px rgba(139, 92, 246, 0.3);
        }
        .glass-card {
            background: rgba(15, 23, 42, 0.85);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .input-style {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(139, 92, 246, 0.3);
            color: white;
            transition: all 0.3s;
        }
        .input-style:focus {
            border-color: #06b6d4;
            box-shadow: 0 0 10px rgba(6, 182, 212, 0.3);
            outline: none;
        }
        
        /* Loading Spinner */
        .loader {
            border: 3px solid rgba(255,255,255,0.1);
            border-radius: 50%;
            border-top: 3px solid #06b6d4;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: none;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-brand-dark text-white font-sans overflow-x-hidden selection:bg-brand-purple selection:text-white">

    <!-- Auth Modal (Hidden by default) -->
    <div id="authModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center bg-black/80 backdrop-blur-sm transition-opacity duration-300">
        <div class="glass-card w-full max-w-md p-8 rounded-3xl relative transform scale-95 transition-transform duration-300" id="authModalContent">
            <!-- Close Button -->
            <button onclick="toggleAuthModal()" class="absolute top-4 left-4 text-gray-400 hover:text-white">
                <i data-lucide="x" class="w-6 h-6"></i>
            </button>

            <!-- Login Form -->
            <div id="loginForm" class="block">
                <h2 class="text-3xl font-bold text-center mb-2">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø§Ú©Ø§Ù†Øª ğŸ®</h2>
                <p class="text-gray-400 text-center mb-8 text-sm">Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡ ÙˆØ§Ø±Ø¯ Ø´Ùˆ</p>
                
                <form id="frmLogin" class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-1">Ø§ÛŒÙ…ÛŒÙ„</label>
                        <div class="relative">
                            <i data-lucide="mail" class="absolute right-3 top-3 w-5 h-5 text-gray-500"></i>
                            <input type="email" id="loginEmail" required class="input-style w-full p-3 pr-10 rounded-xl" placeholder="example@email.com">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-1">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                        <div class="relative">
                            <i data-lucide="lock" class="absolute right-3 top-3 w-5 h-5 text-gray-500"></i>
                            <input type="password" id="loginPass" required class="input-style w-full p-3 pr-10 rounded-xl" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                        </div>
                    </div>
                    
                    <button type="submit" class="w-full bg-gradient-to-r from-brand-cyan to-brand-purple hover:from-brand-purple hover:to-brand-cyan text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-brand-purple/25 flex justify-center items-center gap-2">
                        <span>ÙˆØ±ÙˆØ¯</span>
                        <div class="loader" id="loginLoader"></div>
                    </button>
                </form>
                
                <div class="mt-6 text-center text-sm text-gray-400">
                    Ø­Ø³Ø§Ø¨ Ù†Ø¯Ø§Ø±ÛŒØŸ 
                    <button onclick="switchAuthMode('signup')" class="text-brand-cyan hover:underline font-bold">Ø«Ø¨Øª Ù†Ø§Ù… Ú©Ù†</button>
                </div>
            </div>

            <!-- Signup Form -->
            <div id="signupForm" class="hidden">
                <h2 class="text-3xl font-bold text-center mb-2">Ø¹Ø¶ÙˆÛŒØª Ø¯Ø± Ø§Ø³Ú©ÙˆØ§Ø¯ ğŸš€</h2>
                <p class="text-gray-400 text-center mb-8 text-sm">ÛŒÙ‡ Ø§Ú©Ø§Ù†Øª Ø¨Ø³Ø§Ø² Ùˆ Ø¨Ù‡ Ø¬Ù…Ø¹ Ù…Ø§ Ø¨Ù¾ÛŒÙˆÙ†Ø¯</p>
                
                <form id="frmSignup" class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-1">Ù†Ø§Ù… Ù†Ù…Ø§ÛŒØ´ÛŒ (Ù†ÛŒÚ©â€ŒÙ†ÛŒÙ…)</label>
                        <div class="relative">
                            <i data-lucide="user" class="absolute right-3 top-3 w-5 h-5 text-gray-500"></i>
                            <input type="text" id="signupName" required class="input-style w-full p-3 pr-10 rounded-xl" placeholder="Ù…Ø«Ù„Ø§: ToxicGamer">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-1">Ø§ÛŒÙ…ÛŒÙ„</label>
                        <div class="relative">
                            <i data-lucide="mail" class="absolute right-3 top-3 w-5 h-5 text-gray-500"></i>
                            <input type="email" id="signupEmail" required class="input-style w-full p-3 pr-10 rounded-xl" placeholder="example@email.com">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-1">Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</label>
                        <div class="relative">
                            <i data-lucide="lock" class="absolute right-3 top-3 w-5 h-5 text-gray-500"></i>
                            <input type="password" id="signupPass" required class="input-style w-full p-3 pr-10 rounded-xl" placeholder="Ø­Ø¯Ø§Ù‚Ù„ Û¶ Ú©Ø§Ø±Ø§Ú©ØªØ±">
                        </div>
                    </div>
                    
                    <button type="submit" class="w-full bg-gradient-to-r from-brand-pink to-brand-purple hover:from-brand-purple hover:to-brand-pink text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-brand-purple/25 flex justify-center items-center gap-2">
                        <span>Ø«Ø¨Øª Ù†Ø§Ù…</span>
                        <div class="loader" id="signupLoader"></div>
                    </button>
                </form>
                
                <div class="mt-6 text-center text-sm text-gray-400">
                    Ù‚Ø¨Ù„Ø§ Ø§Ú©Ø§Ù†Øª Ø³Ø§Ø®ØªÛŒØŸ 
                    <button onclick="switchAuthMode('login')" class="text-brand-cyan hover:underline font-bold">ÙˆØ§Ø±Ø¯ Ø´Ùˆ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Background Animation -->
    <div class="fixed inset-0 z-[-1] overflow-hidden">
        <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-brand-purple rounded-full blur-[128px] opacity-20 animate-pulse-slow"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-96 h-96 bg-brand-cyan rounded-full blur-[128px] opacity-20 animate-pulse-slow" style="animation-delay: 1.5s;"></div>
    </div>

    <!-- Header -->
    <header class="fixed w-full top-0 z-50 glass-card border-b border-white/5">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="text-2xl font-bold flex items-center gap-2">
                <i data-lucide="gamepad-2" class="text-brand-cyan w-8 h-8"></i>
                <span class="bg-clip-text text-transparent bg-gradient-to-l from-brand-cyan to-brand-purple hidden md:inline">
                    AMIN OREI
                </span>
            </div>
            
            <nav class="hidden md:flex gap-8 text-gray-300 text-sm font-medium">
                <a href="#home" class="hover:text-brand-cyan transition-colors">Ø®Ø§Ù†Ù‡</a>
                <a href="#about" class="hover:text-brand-purple transition-colors">Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ù…Ù†</a>
                <a href="#stats" class="hover:text-brand-pink transition-colors">Ø¢Ù…Ø§Ø±</a>
            </nav>

            <div class="flex items-center gap-3">
                <!-- User Auth Section -->
                <div id="userSection" class="hidden items-center gap-3">
                    <span id="userNameDisplay" class="text-brand-cyan font-bold text-sm"></span>
                    <button id="btnLogout" class="bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white p-2 rounded-lg transition-colors">
                        <i data-lucide="log-out" class="w-5 h-5"></i>
                    </button>
                </div>

                <!-- Login Button (Visible when logged out) -->
                <button id="btnLoginBtn" onclick="toggleAuthModal()" class="bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg text-sm font-bold transition-colors flex items-center gap-2">
                    <i data-lucide="user" class="w-4 h-4"></i>
                    ÙˆØ±ÙˆØ¯ / Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
                </button>

                <a href="https://www.aparat.com/aminoraee" target="_blank" class="bg-brand-purple hover:bg-brand-pink text-white px-4 py-2 rounded-lg text-sm font-bold transition-all shadow-lg shadow-brand-purple/25 flex items-center gap-2">
                    <i data-lucide="tv" class="w-4 h-4"></i>
                    <span class="hidden sm:inline">Ø¢Ù¾Ø§Ø±Ø§Øª</span>
                </a>
            </div>
        </div>
    </header>

    <!-- Main Hero -->
    <section id="home" class="min-h-screen flex items-center pt-20 relative">
        <div class="container mx-auto px-4 grid md:grid-cols-2 gap-12 items-center">
            <div class="order-2 md:order-1 space-y-6">
                <div class="inline-block px-4 py-1 rounded-full bg-brand-purple/10 border border-brand-purple/30 text-brand-purple text-sm font-bold mb-2">
                    ğŸ‘‹ Ø³Ù„Ø§Ù… Ø±ÙÙ‚Ø§!
                </div>
                <h1 class="text-5xl md:text-7xl font-bold leading-tight">
                    Ù…Ù† <span class="text-transparent bg-clip-text bg-gradient-to-l from-brand-cyan to-brand-purple neon-text">Ø§Ù…ÛŒÙ† Ø§ÙˆØ±Ø¹ÛŒ</span> Ù‡Ø³ØªÙ…
                </h1>
                <h2 class="text-2xl md:text-3xl text-gray-300 font-light">
                    Ø®ÙÙ†â€ŒØªØ±ÛŒÙ† Ø§Ø³ØªØ±ÛŒÙ…Ø± <span class="text-brand-pink font-bold">Ø¢Ù¾Ø§Ø±Ø§Øª</span> ğŸš€
                </h2>
                <p class="text-gray-400 text-lg leading-relaxed max-w-lg">
                    Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ú¯ÛŒÙ…ÛŒÙ†Ú¯ Ù…Ù† Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒØ¯! Ø§ÛŒÙ†Ø¬Ø§ Ø¬Ø§ÛŒÛŒÙ‡ Ú©Ù‡ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒâ€ŒØªØ±ÛŒÙ† Ú¯ÛŒÙ…â€ŒÙ¾Ù„ÛŒâ€ŒÙ‡Ø§ØŒ Ø®Ù†Ø¯Ù‡â€ŒØ¯Ø§Ø±ØªØ±ÛŒÙ† Ù„Ø­Ø¸Ø§Øª Ùˆ Ø¨Ø§Ø­Ø§Ù„â€ŒØªØ±ÛŒÙ† Ú©Ø§Ù…ÛŒÙˆÙ†ÛŒØªÛŒ Ú¯ÛŒÙ…Ø±Ù‡Ø§ÛŒ Ø§ÛŒØ±Ø§Ù†ÛŒ Ø¯ÙˆØ± Ù‡Ù… Ø¬Ù…Ø¹ Ù…ÛŒØ´Ù†.
                </p>
                <div class="flex gap-4 pt-4">
                    <a href="https://www.aparat.com/aminoraee" class="group relative px-8 py-4 bg-brand-cyan text-brand-dark font-black rounded-xl overflow-hidden shadow-[0_0_20px_rgba(6,182,212,0.4)] hover:shadow-[0_0_30px_rgba(6,182,212,0.6)] transition-all">
                        <span class="relative z-10 flex items-center gap-2">
                            Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ù†Ø§Ù„
                            <i data-lucide="arrow-left" class="w-5 h-5 group-hover:-translate-x-1 transition-transform"></i>
                        </span>
                        <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                    </a>
                </div>
            </div>
            <div class="order-1 md:order-2 flex justify-center relative">
                <div class="absolute inset-0 bg-gradient-to-tr from-brand-cyan to-brand-purple rounded-full blur-[100px] opacity-30 animate-pulse"></div>
                <div class="relative w-80 h-80 md:w-[500px] md:h-[500px] animate-float">
                    <div class="w-full h-full rounded-3xl overflow-hidden border-2 border-brand-purple/50 shadow-[0_0_50px_rgba(139,92,246,0.3)] relative group">
                        <img src="image.png" 
                             onerror="this.src='https://placehold.co/600x600/1e1e2e/8b5cf6?text=Image+Not+Found'" 
                             alt="Amin Orei" 
                             class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-brand-dark via-transparent to-transparent opacity-60"></div>
                        <div class="absolute bottom-6 right-6 bg-red-600 text-white px-3 py-1 rounded-full text-xs font-bold flex items-center gap-2 animate-pulse">
                            <span class="w-2 h-2 bg-white rounded-full"></span>
                            LIVE
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section id="stats" class="py-20 bg-black/20">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <div class="glass-card p-6 rounded-2xl text-center transform hover:-translate-y-2 transition-transform">
                    <i data-lucide="users" class="w-10 h-10 text-brand-cyan mx-auto mb-4"></i>
                    <h3 class="text-3xl font-bold text-white mb-1">+50K</h3>
                    <p class="text-gray-400 text-sm">Ø¯Ù†Ø¨Ø§Ù„â€ŒÚ©Ù†Ù†Ø¯Ù‡</p>
                </div>
                <div class="glass-card p-6 rounded-2xl text-center transform hover:-translate-y-2 transition-transform delay-100">
                    <i data-lucide="eye" class="w-10 h-10 text-brand-purple mx-auto mb-4"></i>
                    <h3 class="text-3xl font-bold text-white mb-1">+1M</h3>
                    <p class="text-gray-400 text-sm">Ø¨Ø§Ø²Ø¯ÛŒØ¯ Ú©Ù„</p>
                </div>
                <div class="glass-card p-6 rounded-2xl text-center transform hover:-translate-y-2 transition-transform delay-200">
                    <i data-lucide="clock" class="w-10 h-10 text-brand-pink mx-auto mb-4"></i>
                    <h3 class="text-3xl font-bold text-white mb-1">+2000</h3>
                    <p class="text-gray-400 text-sm">Ø³Ø§Ø¹Øª Ø§Ø³ØªØ±ÛŒÙ…</p>
                </div>
                <div class="glass-card p-6 rounded-2xl text-center transform hover:-translate-y-2 transition-transform delay-300">
                    <i data-lucide="trophy" class="w-10 h-10 text-yellow-500 mx-auto mb-4"></i>
                    <h3 class="text-3xl font-bold text-white mb-1">PRO</h3>
                    <p class="text-gray-400 text-sm">Ù„ÙˆÙ„ Ú¯ÛŒÙ…ÛŒÙ†Ú¯</p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="py-20">
        <div class="container mx-auto px-4">
            <div class="glass-card rounded-3xl p-8 md:p-12 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-brand-purple/20 rounded-full blur-[80px]"></div>
                <div class="relative z-10 grid md:grid-cols-2 gap-12 items-center">
                    <div>
                        <h2 class="text-3xl md:text-4xl font-bold mb-6 border-r-4 border-brand-cyan pr-4">Ú†Ø±Ø§ Ú©Ø§Ù†Ø§Ù„ Ù…Ù†ØŸ</h2>
                        <div class="space-y-6 text-gray-300">
                            <p>Ø³Ù„Ø§Ù… Ø±ÙÙ‚Ø§! Ø§Ù…ÛŒÙ† Ù‡Ø³ØªÙ…. ØªÙˆÛŒ Ú©Ø§Ù†Ø§Ù„ Ø¢Ù¾Ø§Ø±Ø§Øª Ù…Ù†ØŒ ÙÙ‚Ø· Ø¨Ø§Ø²ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…Ø› Ø²Ù†Ø¯Ú¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…!</p>
                            <ul class="space-y-4">
                                <li class="flex items-center gap-3">
                                    <div class="bg-brand-purple/20 p-2 rounded-lg"><i data-lucide="joystick" class="text-brand-purple w-5 h-5"></i></div>
                                    <span>Ø§Ø³ØªØ±ÛŒÙ… Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ² Ø¯Ù†ÛŒØ§ Ø¨Ø§ Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ú©ÛŒÙÛŒØª</span>
                                </li>
                                <li class="flex items-center gap-3">
                                    <div class="bg-brand-cyan/20 p-2 rounded-lg"><i data-lucide="zap" class="text-brand-cyan w-5 h-5"></i></div>
                                    <span>Ø±ÛŒâ€ŒØ§Ú©Øªâ€ŒÙ‡Ø§ÛŒ Ø®ÙÙ† Ùˆ Ù„Ø­Ø¸Ø§Øª ÙØ§Ù†</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-gray-800 rounded-xl p-4 transform translate-y-8">
                            <div class="h-32 bg-gradient-to-br from-blue-600 to-blue-900 rounded-lg mb-3 flex items-center justify-center"><span class="font-bold text-xl">Warzone</span></div>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4">
                            <div class="h-32 bg-gradient-to-br from-green-600 to-green-900 rounded-lg mb-3 flex items-center justify-center"><span class="font-bold text-xl">FIFA</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-black py-12 border-t border-white/10 mt-10 text-center text-gray-500">
        <p>Â© 2024 Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ù…ÛŒÙ† Ø§ÙˆØ±Ø¹ÛŒ</p>
    </footer>

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile, signInWithCustomToken, signInAnonymously } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';
        import { getFirestore, doc, setDoc, getDoc, collection } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';

        let firebaseConfig;

        // ğŸŸ¡ Ø¨Ø±Ø±Ø³ÛŒ: Ø¢ÛŒØ§ Ø¯Ø± Ù…Ø­ÛŒØ· Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ù‡Ø³ØªÛŒÙ… ÛŒØ§ ÙØ§ÛŒÙ„ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯Ù‡ØŸ
        if (typeof __firebase_config !== 'undefined') {
            // Ù…Ø­ÛŒØ· Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ (ØªØ³Øª Ø®ÙˆØ¯Ú©Ø§Ø±)
            firebaseConfig = JSON.parse(__firebase_config);
        } else {
            // âš ï¸ Ø§Ú¯Ø± ÙØ§ÛŒÙ„ Ø±Ø§ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ø±Ø¯ÛŒØ¯ØŒ Ú©Ø¯ ÙØ§ÛŒØ±Ø¨ÛŒØ³ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ø± Ø¨Ø®Ø´ Ø²ÛŒØ± Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†ÛŒØ¯:
            // âš ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙØ§ÛŒØ±Ø¨ÛŒØ³ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯
            firebaseConfig = {
                apiKey: "API_KEY_KHOD_RA_INJA_BEZARID",
                authDomain: "PROJECT_ID.firebaseapp.com",
                projectId: "PROJECT_ID",
                storageBucket: "PROJECT_ID.appspot.com",
                messagingSenderId: "SENDER_ID",
                appId: "APP_ID"
            };
        }

        let app;
        try {
            app = initializeApp(firebaseConfig);
        } catch (e) {
            console.error("Firebase Init Error: Check your config!", e);
        }

        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'amin-orei-site';

        // --- Logic: Authentication ---

        // 1. Initial Setup Check (Important for Environment)
        async function initAuth() {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } 
            } catch (error) {
                console.error("Auth Init Error:", error);
            }
        }
        initAuth();

        // 2. Monitor Auth State
        onAuthStateChanged(auth, async (user) => {
            const userSection = document.getElementById('userSection');
            const loginBtn = document.getElementById('btnLoginBtn');
            const userNameDisplay = document.getElementById('userNameDisplay');

            if (user && !user.isAnonymous) {
                // User is logged in
                loginBtn.classList.add('hidden');
                userSection.classList.remove('hidden');
                userSection.classList.add('flex');
                
                // Try to get name from Auth profile, if not, fetch from Firestore
                let displayName = user.displayName;
                if (!displayName) {
                    try {
                        const userDoc = await getDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'profile', 'info'));
                        if (userDoc.exists()) {
                            displayName = userDoc.data().name;
                        }
                    } catch (e) {
                        console.log("Error fetching profile:", e);
                    }
                }
                userNameDisplay.textContent = `Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒØŒ ${displayName || 'Ú¯ÛŒÙ…Ø±'}`;
                
                // Hide modal if open
                const modal = document.getElementById('authModal');
                if(!modal.classList.contains('hidden')) toggleAuthModal();

            } else {
                // User is logged out
                loginBtn.classList.remove('hidden');
                userSection.classList.add('hidden');
                userSection.classList.remove('flex');
                userNameDisplay.textContent = '';
            }
        });

        // 3. Helper: Toast Notification
        window.showToast = (msg, type = 'success') => {
            Toastify({
                text: msg,
                duration: 3000,
                gravity: "top", 
                position: "center", 
                style: {
                    background: type === 'success' ? "linear-gradient(to right, #00b09b, #96c93d)" : "linear-gradient(to right, #ff5f6d, #ffc371)",
                    borderRadius: "10px",
                    fontFamily: "Vazirmatn"
                }
            }).showToast();
        };

        // 4. Handle Signup
        const signupForm = document.getElementById('frmSignup');
        signupForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const pass = document.getElementById('signupPass').value;
            const loader = document.getElementById('signupLoader');

            loader.style.display = 'block';

            try {
                const userCredential = await createUserWithEmailAndPassword(auth, email, pass);
                const user = userCredential.user;

                // Update Auth Profile
                await updateProfile(user, { displayName: name });

                // Save to Firestore (Rule 1 Compliant)
                // Path: /artifacts/{appId}/users/{userId}/profile/info
                await setDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'profile', 'info'), {
                    name: name,
                    email: email,
                    role: 'member',
                    joinDate: new Date().toISOString()
                });

                showToast(`Ø®ÙˆØ´ Ø§ÙˆÙ…Ø¯ÛŒ ${name}! Ø«Ø¨Øª Ù†Ø§Ù… Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯.`);
                
            } catch (error) {
                console.error(error);
                let msg = "Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ù†Ø§Ù….";
                if (error.code === 'auth/email-already-in-use') msg = "Ø§ÛŒÙ† Ø§ÛŒÙ…ÛŒÙ„ Ù‚Ø¨Ù„Ø§ Ø«Ø¨Øª Ø´Ø¯Ù‡!";
                if (error.code === 'auth/weak-password') msg = "Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¨Ø§ÛŒØ¯ Ù‚ÙˆÛŒâ€ŒØªØ± Ø¨Ø§Ø´Ø¯.";
                showToast(msg, 'error');
            } finally {
                loader.style.display = 'none';
            }
        });

        // 5. Handle Login
        const loginForm = document.getElementById('frmLogin');
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const pass = document.getElementById('loginPass').value;
            const loader = document.getElementById('loginLoader');

            loader.style.display = 'block';

            try {
                await signInWithEmailAndPassword(auth, email, pass);
                showToast("ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚ÛŒØª Ø¢Ù…ÛŒØ² Ø¨ÙˆØ¯!");
            } catch (error) {
                console.error(error);
                let msg = "Ø§ÛŒÙ…ÛŒÙ„ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª.";
                showToast(msg, 'error');
            } finally {
                loader.style.display = 'none';
            }
        });

        // 6. Handle Logout
        document.getElementById('btnLogout').addEventListener('click', async () => {
            try {
                await signOut(auth);
                showToast("Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø®Ø§Ø±Ø¬ Ø´Ø¯ÛŒØ¯.", 'success');
            } catch (error) {
                showToast("Ø®Ø·Ø§ Ø¯Ø± Ø®Ø±ÙˆØ¬.", 'error');
            }
        });

    </script>

    <!-- UI Scripts (Toggle Modal, Icons) -->
    <script>
        lucide.createIcons();

        function toggleAuthModal() {
            const modal = document.getElementById('authModal');
            const content = document.getElementById('authModalContent');
            
            if (modal.classList.contains('hidden')) {
                // Open
                modal.classList.remove('hidden');
                setTimeout(() => {
                    content.classList.remove('scale-95');
                    content.classList.add('scale-100');
                }, 10);
            } else {
                // Close
                content.classList.remove('scale-100');
                content.classList.add('scale-95');
                setTimeout(() => {
                    modal.classList.add('hidden');
                }, 300);
            }
        }

        function switchAuthMode(mode) {
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');
            
            if (mode === 'signup') {
                loginForm.classList.add('hidden');
                signupForm.classList.remove('hidden');
            } else {
                signupForm.classList.add('hidden');
                loginForm.classList.remove('hidden');
            }
        }

        // Close modal when clicking outside
        document.getElementById('authModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('authModal')) {
                toggleAuthModal();
            }
        });
    </script>
</body>
</html>



